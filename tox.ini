[tox]
envlist = py37,py35,py36,py27

[testenv]
sitepackages=false
whitelist_externals =
    sh

deps =
    cython
    numpy
    invoke
    ipython
    strip_hints

# This changes the install command to: pip install -e .[dev]
extras = dev
commands_pre =  
    invoke install-solvers
    - sh -c 'find tests -name "*.pyc" -delete'

commands =
    pytest -x tests
    invoke lint
    invoke type-check

# Need this to have matplotlib running. Otherwise it complains about
# some environment issue.
setenv =
    DISPLAY = :0.0

# Different test commands for Python2.7
[testenv:py27]
commands = 
    pytest -x tests

[pycodestyle]
ignore = E731,W503,W605
max-line-length = 120
statistics = True