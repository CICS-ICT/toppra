import pinocchio
import numpy as np
from toppra.cpp import Interpolation

def torque_constraint(robot):
    from toppra.constraint import JointTorqueConstraint
    def inv_dyn (q, v, a):
        return pinocchio.rnea(robot.model, robot.data, q, v, a)
    return JointTorqueConstraint (inv_dyn,
        np.vstack([-robot.model.effortLimit,robot.model.effortLimit]).T,
        np.zeros(robot.model.nv))

def torque_constraint_cpp(robot):
    from toppra.cpp import jointTorque
    jt = jointTorque.Pinocchio(robot.model, np.zeros(robot.model.nv))
    jt.discretizationType = Interpolation
    return jt

def joint_velocity_constraint(robot):
    from toppra.constraint import JointVelocityConstraint
    return JointVelocityConstraint(
        np.vstack([-robot.model.velocityLimit,robot.model.velocityLimit]).T
        )

def joint_velocity_constraint_cpp(robot):
    from toppra.cpp import LinearJointVelocity
    ljv = LinearJointVelocity(-robot.model.velocityLimit, robot.model.velocityLimit)
    ljv.discretizationType = Interpolation
    return ljv

ts = np.array((                0, 0.235236577782504, 0.470473155565007, 0.705709733347511, 0.940946311130014,  1.17618288891252,  1.41141946669502,  1.64665604447753,  1.88189262226003,  2.11712920004253,  2.35236577782504,  2.58760235560754,  2.82283893339004,  3.05807551117255,  3.29331208895505,  3.52854866673755,  3.76378524452006,  3.99902182230256,  4.23425840008506,  4.46949497786757,  4.70473155565007,  4.93996813343258,  5.17520471121508,  5.41044128899758,  5.64567786678009,  5.88091444456259,  6.11615102234509,   6.3513876001276,   6.5866241779101,   6.8218607556926,  7.05709733347511,  7.29233391125761,  7.52757048904011,  7.76280706682262,  7.99804364460512,  8.23328022238763,  8.46851680017013,  8.70375337795263,  8.93898995573514,  9.17422653351764,  9.40946311130014,  9.64469968908265,  9.87993626686515,  10.1151728446477,  10.3504094224302,  10.5856460002127,  10.8208825779952,  11.0561191557777,  11.2913557335602,  11.5265923113427,  11.7618288891252,))
qs = np.array([
  (    0, -1.57,   1.7,     0,     0,     0,),
  (0.0503549709947069,  -1.71986045311861,   1.73575860104758, -0.603258525811938,  0.183215779503961, -0.667282101551635,),
  (-0.0724745785804546,   -1.81386130474229,    1.81514894043763,  -0.657003962399752,   0.430932231344212,   -0.39951297730114,),
  (-0.386926557484954,  -1.96333972468976,   1.92923792541892, -0.908734725787544,    1.0779301768607,  0.172638050077154,),
  (-0.56736854068731, -2.04723865590972,  1.99431622344399, -1.05031645873642,  1.43171957586145, 0.492464441377884,),
  (-0.707771443246614,  -2.09147540101969,    1.9332962744884, -0.889277706483297,   1.31462070942198,  0.452281390301478,),
  ( -1.01271204590733,   -2.2002498899506,   1.99676400552897, -0.465519474934671,    1.0435477922064,  0.461420117040671,),
  ( -1.36303461456888,  -2.32521244998568,    2.0696771511424, 0.0213034370432239,   0.73213317629448,  0.471918890236618,),
  (-1.54153605271019, -2.38888518670174,  2.10682891501857, 0.269356510643957,  0.57345668276771, 0.477268377485915,),
  (-1.48713317443066, -2.60300337735703,  2.09235708841987,  0.89133598973987, 0.403563518716601, 0.487928078850264,),
  (-1.44044122942652, -2.76930283476883,  2.08209697193177,  1.39529992425412, 0.280104011332838, 0.396513168516593,),
  (-1.33963353739253, -2.62812889858316,  2.16469471076551,  1.36127989896737, 0.561804324292552, -1.07228002147127,),
  (-1.22372527174675, -2.76436046519261,  2.19790290110158,  1.98465720846608, 0.556119789333443, -1.96132933540529,),
  (-1.11367396889516, -2.89368235532664,  2.23040318164014,  2.57194550080158, 0.548896264380347, -2.80169372340161,),
  (-1.13689358260684, -2.78633278197694,  2.42338572335551,  1.40946679416177, 0.286488588167977, -2.11142865429765,),
  ( -1.12297557828593,  -2.74984898037025,   2.49705158885424,  0.961697420639376, 0.0733305670091601,   -1.6926114753075,),
  (-0.917628838219449,  -2.85071293920839,   2.38371325522464,   1.61055183642838, -0.723396244875672, -0.790898527115533,),
  ( -0.748419546039611,   -2.93382659894281,    2.29032049328404,     2.1452191819527,   -1.37991302160211, -0.0478713445873031,),
  (-0.69850808695163, -2.99518302958005,  2.11835029594699,  2.14337198373377, -1.28191849239624,  -0.7513054598559,),
  (-0.571957581496567,  -3.09830278860361,   1.80792988264715,   1.75873454878024,  -1.29516351244217,  -2.28288284583178,),
  (-0.525518383724099,  -3.03822088141947,   1.82549270768805,    1.6560666281127,  -1.19399304892711,  -2.37854004699063,),
  (-0.391875426405239,  -2.77340119858784,   1.99944476969547,   1.39672710347774, -0.803317945717651,  -2.21606013146804,),
  (-0.226276349789181,  -2.44525899172209,   2.21499148777024,   1.07537544626223, -0.319226320941552,  -2.01472872935756,),
  (-0.102524167931401,  -2.20003833657668,    2.3760695396478,  0.835229368538407, 0.0425353265827031,  -1.86427378240503,),
  (-0.0832856886962221,   -2.15466734054785,      2.343878851793,   0.772328337001301,   0.137284267277503,   -1.79518127668179,),
  (-0.117888171689478,   -2.1647141761657,   1.83682360196886,  0.633072865057644,  0.347008360723593,   -1.4683045017208,),
  (-0.165902405856038,  -2.17865511555096,   1.13323624654163,  0.439842661312412,  0.638020474942475,  -1.01473190637711,),
  (-0.201350565625796,  -2.18894749353526,  0.613788682291293,  0.297183817459101,  0.852870177303242, -0.679866337738622,),
  (-0.213682438956816,  -2.22394717126395,   0.48684130702839,  0.289642056317793,   0.92643992047135, -0.670718767607659,),
  (-0.257343545714123,  -2.42203798704647,  0.164300606667445,   0.36229940378961,   1.18414459283819, -0.891756266835414,),
  (-0.320212342550461,  -2.70727425743695, -0.300134385215771,  0.466920664131534,   1.55522045174537,   -1.2100340812162,),
  (-0.379019301610086,  -2.97408193500138, -0.734563083201402,  0.564782536527632,   1.90232177928592,  -1.50774854915173,),
  (-0.410494895037253,  -3.11688697230572, -0.967084901869583,  0.617161720161966,   2.08810285755284,  -1.66709600904374,),
  (-0.445521353320552,  -3.05554877196595, -0.913324500257408,   0.63213021193601,    2.0736192401706,  -1.49972276416311,),
  (-0.559469734612946,  -2.83559010593029, -0.709467486727205,  0.676811044744089,   2.00599844192532, -0.923276749713944,),
  (-0.714893168748563,  -2.53557065102088, -0.431410380903183,  0.737754854531534,   1.91376495371713, -0.137015302703295,),
  (-0.871247379844449,  -2.23375448380863, -0.151688087656301,  0.799063635626791,   1.82097911118563,  0.653954791003368,),
  ( -0.98798809201763,  -2.00840568086446, 0.0571644881424411,  0.844839382358299,    1.7517012499704,   1.24452674554046,),
  (-1.02321137992743, -1.93470936483374, 0.125061497355248, 0.858296990969441,  1.72695611589952,  1.43347778020944,),
  (-0.88178575167953, -1.89481292980723,  0.13984604490027, 0.783423733072067,  1.60008626307338,  1.30844489808089,),
  (-0.582834748726476,  -1.81047829107739,  0.171098197509018,  0.625153723455797,   1.33190382530191,   1.04414552053865,),
  (-0.208109308753906,  -1.70476754152045,  0.210271762811429,  0.426767371170392,  0.995745789389223,  0.712854775380841,),
  (0.160639630552542, -1.60074277401264, 0.248820548437441, 0.231545085265616, 0.664949142139394, 0.386847790405584,),
  ( 0.441661131507236,  -1.52146608143017,  0.278198362016995, 0.0827672747912267,  0.412850870356508,  0.138399693410992,),
  ( 0.553251638705113,  -1.48999497139995,  0.289743892265743, 0.0237155866613631,  0.312812141521241, 0.0397886349886067,),
  (  0.676095978480489,   -1.52268735994261,   0.126285577177137, 0.00830895906412847,   0.352749475919558, 0.00773285060185623,),
  (  0.823435947853413,   -1.51286986357175,  -0.220662758631316, 0.00871876223296517,   0.428511496433533,  0.0109064435355949,),
  (   1.05890115452123,   -1.49718044255609,  -0.775123723581167, 0.00937367201918229,   0.549587399284731,  0.0159781882848483,),
  (   1.2995365257874,  -1.48114652525476,   -1.3417591175803, 0.0100429618127038,  0.673321794044322, 0.0211612945194164,),
  (  1.46238698895537,  -1.47029554002686,  -1.72523074053657, 0.0104959050034537,  0.757059290283475,  0.024668971909099,),
  (                1.57,                -1.57,                 -1.8,                    0,                  0.8, 6.93889390390723e-18,),
  ])
vs = np.array([
  (0, 0, 0, 0, 0, 0,),
  (0.0461949552508073, -0.629258993863049,  0.119376226798737,    1.3528314949585,  -1.38149458579235,  0.507481303080793,),
  ( -1.14330115952399, -0.543481556214538,  0.414810774199763, -0.915256042184202,   2.35238939788416,   2.08025700872791,),
  ( -1.28045327695797, -0.608678416726928,  0.464572095214791,  -1.02505152619479,   2.63458554914442,    2.3298077514847,),
  ( -0.893344325821366,  -0.132588326918411, -0.0626890867976102,   0.123949865392783,   0.356739367793836,  -0.298476749768652,),
  (-0.892074648699643, -0.318209392759961,  0.185668793783971,   1.23966428951711, -0.792997965135265, 0.0267344734492394,),
  ( -1.54666466064799, -0.551706320973815,  0.321909564798646,   2.14930998258754,  -1.37488710213694, 0.0463517995553898,),
  ( -1.27791571498805, -0.455841654347553,   0.26597445595531,   1.77584519321633,  -1.13598627993418, 0.0382976960532556,),
  (-0.0858278117198057,  -0.030615392881175,  0.0178634672539603,   0.119269921403479, -0.0762954985269793, 0.00257216294283691,),
  ( 0.315858791890511,  -1.46003695112375, -0.139572575575507,   4.16079877536805,  -1.20241188816472,  0.233259724342687,),
  ( 0.315345030212637,  0.441618077682975,  0.258380942192783, -0.106420905839891,  0.881210470241096,  -4.59465566096557,),
  ( 0.0493192690086244,  0.0690680958492729,  0.0404102109556476, -0.0166439955616866,   0.137819379001253,  -0.718594037750838,),
  (  0.752754911082239,  -0.887449322531805,   0.215107403409326,    4.05446930569226, -0.0399056938244268,   -5.76659318534225,),
  (-0.0173895600836792,  0.0803959048975522,   0.144527878281312,  -0.870599897402435,  -0.196521531691922,   0.516951144919849,),
  (-0.11960729133617, 0.552971804522042,  0.99407851380988, -5.98808107075596, -1.35169653411571,     3.55564637055,),
  ( 0.519853609199795, -0.255346118585625, -0.286926112286778,   1.64263289392338,  -2.01698506911032,   2.28276684805424,),
  (  1.01107344096779, -0.496627654761387, -0.558048201492447,   3.19478880768467,  -3.92287366696392,   4.43979784143875,),
  ( 0.212610167492697, -0.104431670917254, -0.117347283373144,  0.671805386219486, -0.824908254525558,  0.933607910616731,),
  (  0.552337803469852,  -0.450072806810238,   -1.35484981760994,   -1.67877477210034, -0.0578087400976693,   -6.68466780256681,),
  (  0.312051970871301,   -0.25427574487644,  -0.765443815657423,  -0.948450337804056, -0.0326599612913317,   -3.77660871536699,),
  ( 0.395618291434022,  0.783935888293654,    0.5149438394917, -0.767713179173391,    1.1565010228618,  0.480983269608634,),
  (0.688334785501552,  1.36396711982053, 0.895948860243682, -1.33574128890135,  2.01219180391881, 0.836860991729723,),
  (0.667311746579807,  1.32230899872605, 0.868584897013099, -1.29494523776833,  1.95073568183575, 0.811301683131939,),
  ( 0.332549174668788,  0.658961525010212,  0.432851949799951, -0.645325025774345,  0.972132656612619,  0.404305343815281,),
  (-0.0817786604358497, -0.0237444451199391,   -1.19836195297504,  -0.329112970191591,   0.495656783546057,   0.772532560426673,),
  ( -0.194008927544944, -0.0563305183567145,   -2.84295335810408,  -0.780776476989233,    1.17587938581581,    1.83273011251509,),
  ( -0.195806430264277, -0.0568524235144254,   -2.86929346758666,  -0.788010411315552,    1.18677396896906,      1.849710451527,),
  (-0.0871711685938505, -0.0253101605930718,   -1.27738228142277,   -0.35081477317055,   0.528340533005822,   0.823473577462406,),
  (-0.111805539259551, -0.507262690431483, -0.825948758868163,  0.186057901839498,  0.659919365393965, -0.566023599335474,),
  (-0.242918031617858,  -1.10212119264268,  -1.79452510179926,  0.404244902185726,   1.43379580591141,  -1.22979004001434,),
  (-0.275110840332157,  -1.24818024185537,  -2.03234525434402,   0.45781761855891,   1.62381016510762,   -1.3927684539808,),
  (-0.208383965402449, -0.945439838069542,  -1.53940921650245,  0.346776050959052,   1.22996244298258,  -1.05495884123485,),
  (-0.0427374068287349,  -0.193899981285203,  -0.315716988274551,  0.0711201993861518,   0.252252639536313,  -0.216361201776492,),
  (-0.338791258546571,   0.65398097322005,  0.606107549700252,  0.132845025162005, -0.201050116566889,   1.71388894255774,),
  (-0.601281009786723,   1.16067439769849,   1.07570945332708,  0.235771109376403, -0.356820354886636,   3.04178117955118,),
  (-0.691415439991491,    1.3346641359191,   1.23696260628448,   0.27111414242833, -0.410309154382529,   3.49775635415995,),
  (-0.609194549160883,    1.1759501878819,   1.08986700857247,  0.238874124317789, -0.361516515054573,   3.08181446638407,),
  ( -0.35461833729489,  0.684532553586854,  0.634422660191032,  0.139051055044775, -0.210442436902762,    1.7939555162235,),
  (  0.150540484253236,    0.04246775300401,  0.0157374089439521, -0.0796988257441611,  -0.135046591754266,   -0.13309122862948,),
  ( 0.993950320504999,  0.280395249947892,   0.10390695062098, -0.526215082841266, -0.891651198168472, -0.878740825160008,),
  (  1.48983368593206,  0.420284877553502,  0.155746290376931, -0.788744608547569,  -1.33649737187885,  -1.31714599363674,),
  ( 1.63819058053441, 0.462136635820842, 0.171255428211805, -0.86728740286307, -1.46958511288539, -1.44830673405967,),
  (  1.43902100431206,  0.405950524749911,  0.150434364125601, -0.761843465787769,  -1.29091442118811,  -1.27222304642881,),
  ( 0.892324957265006,  0.251726544340708, 0.0932830981183197, -0.472412797321667, -0.800485296786994, -0.788894930744153,),
  (  0.220415647889636,  0.0209850966746124,   -0.54023193002134, 0.00679203311947406,    0.11510375595705,  0.0158252761823133,),
  (   0.321487672280921,   0.0214212346407231,   -0.757022098996691, 0.000894167871782287,    0.165308542726039,    0.006924604432708,),
  (  0.872434191163705,  0.0581316769781976,   -2.05436170521063, 0.00242653977506573,   0.448604525773605,  0.0187915811033004,),
  (   1.07073541364515,  0.0713448026516618,   -2.52131089368631, 0.00297808372951982,   0.550570756318692,   0.023062841380449,),
  (  0.916391339725263,  0.0610606116611159,   -2.15786966442376, 0.00254879973514457,   0.471207234361303,  0.0197383852641536,),
  (  0.409401969404037,  0.0272791040065596,  -0.964038017422964, 0.00113868779193997,   0.210513959901436, 0.00881821275441427,),
  ( 3.01092484278342e-13, -3.76143560743003e-13, -4.66293670342566e-14, -3.92463839204993e-14,  1.08801856413265e-13, -9.34807786734382e-14,),
  ])
accs = np.array([
  (-93.0792643681308, -687.405331177699,  832.642114650583,  930.303828129922,  131.142571379294, -2162.84195850557,),
  ( 54.7202275206973,  -745.38864961947,  141.407092084478,   1602.4963505079, -1636.44921058447,  601.136903722743,),
  (-3.76801789816311, -1.79117130607174,  1.36710647803975, -3.01644157326654,  7.75285258904756,  6.85597628968516,),
  (  2.60193974206283,    1.2368624385735, -0.944031788855687,   2.08295167942776,  -5.35359857914463,  -4.73427612630731,),
  ( 1239.51899984076,   183.96685983466,  86.9813709253267, -171.980958227725, -494.977369409137,  414.137742475501,),
  (-4.74526326337129,  -1.6926692667756, 0.987638543009623,  6.59421654962805,   -4.218239042405, 0.142210200580383,),
  (-0.820112819880312, -0.292540094922751,   0.17069127371337,   1.13966311862216, -0.729028448790053,  0.024577858411772,),
  (   3.10503762361068,    1.10758907693011,  -0.646255995582887,   -4.31489031238375,     2.7601821448249, -0.0930544837568393,),
  ( 7.03018806710166,  2.50771824878296, -1.46320326487914, -9.76944374338964,  6.24939273843986, -0.21068682592545,),
  ( -0.134147982060783,   0.620090419377409,  0.0592776894143593,   -1.76712750699712,    0.51067480958107, -0.0990674381084595,),
  ( 5.14888576485794,  7.21064489950118,  4.21878839907492,  -1.7376176399318,  14.3882148483795, -75.0205484805561,),
  (-7.41065783884191, -10.3780943271846, -6.07199280539534,  2.50090803570699, -20.7085847351339,  107.975131137327,),
  ( -0.110062183277089,   0.129756190956226, -0.0314513928899621,  -0.592814124816357, 0.00583471156792442,   0.843148050853717,),
  (-1.20505135519569,  5.57122743087135,  10.0154066433177, -60.3303120464026, -13.6184318033869,  35.8233718827823,),
  (0.335988114979704, -1.55334973447477, -2.79245990997376,  16.8210821333141,  3.79704251679511, -9.98814460414293,),
  ( 4.82944189674414, -2.37216635884597, -2.66554461376283,  15.2600654847714, -18.7377985369051,  21.2069122179638,),
  (-0.653052013856372,  0.320771644212364,  0.360443155805513,  -2.06351307448767,   2.53378285346191,  -2.86766401330001,),
  (-6.13554592445692,  3.01370964727072,  3.38643092537387, -19.3870916337468,  23.8053642438291, -26.9422402445639,),
  (  1.67649131930571,  -1.36609000675454,  -4.11232753564361,  -5.09552544623042, -0.175464815815441,   -20.289734783756,),
  (-3.71942048332983,  3.03077212192143,  9.12350400750567,  11.3048015816071, 0.389281723401896,   45.014283275433,),
  ( 1.91120898288976,  3.78714873441681,  2.48766377346435, -3.70877776909802,  5.58698925573639,  2.32360223326281,),
  (0.577489814098951,  1.14432269740414, 0.751671064200669, -1.12064217130894,  1.68816148079718,  0.70209832296725,),
  (-0.756229354691846,   -1.4985033396085, -0.984321645062999,   1.46749342648011,    -2.210666294142, -0.919405587328289,),
  (-2.08994852348266, -4.14132937662116, -2.72031435432668,  4.05562902426918, -6.10949406908122, -2.54090949762385,),
  (-0.711822331724246, -0.206677710306002,  -10.4308482808355,   -2.8646832877171,   4.31432314393874,   6.72432056926615,),
  ( -0.242368280697094, -0.0703716630861239,   -3.55159799203619,  -0.975395589941482,    1.46898325068732,    2.28956291843411,),
  ( 0.227085770330058, 0.0659343841337542,   3.32765229676317,  0.913892107834137,  -1.37635664256409,  -2.14519473239792,),
  (0.696539821357209, 0.202240431353632,  10.2069025855625,  2.80317980560975, -4.22169653581551, -6.57995238322995,),
  (-0.767620137490967,  -3.48269914667748,  -5.67069309840759,   1.27741248901598,   4.53078977438405,  -3.88613226162597,),
  (-0.347108648263867,  -1.57483491387323,  -2.56421961849673,  0.577630654384618,   2.04876896441856,   -1.7572625448788,),
  (0.0734028409632319,  0.333029318931017,  0.542253861414113, -0.122151180246739,  -0.43325184554693,  0.371607171868354,),
  ( 0.493914330190332,   2.24089355173527,   3.64872734132497, -0.821933014878099,  -2.91527265551242,   2.50047688861552,),
  ( 0.91442581941743,  4.14875778453951,  6.75520082123581, -1.52171484950946, -5.39729346547791,  4.62934660536267,),
  ( -1.48219896346314,   2.86114206367024,   2.65169764346032,  0.581191968886918, -0.879586668375104,   7.49819940764743,),
  (-0.749509673982231,   1.44680552896073,   1.34089490361381,  0.293893744267456, -0.444784224860468,   3.79164547541484,),
  ( -0.0168203845013521,   0.0324689942512721,   0.0300921637673521,  0.00659551964800653, -0.00998178134584882,    0.085091543182406,),
  (  0.71586890497956,  -1.38186754045825,  -1.28071057607916, -0.280702704971456,   0.42482066216879,   -3.6214623890502,),
  (  1.44855819446047,  -2.79620407516777,  -2.59151331592568, -0.568000929590919,  0.859623105683428,  -7.32801632128279,),
  ( 4.32404297517277,  1.21982063469026, 0.452032773303998, -2.28922571425267, -3.87900483576067, -3.82284004908829,),
  ( 2.84669419676118, 0.803057772968491, 0.297591647423194, -1.50709083911895, -2.55370740267151, -2.51673182837667,),
  (  1.36934541834959,  0.386294911246725,  0.143150521542389, -0.724955963985235,  -1.22840996958235,  -1.21062360766505,),
  ( -0.108003360062012, -0.0304679504750435, -0.0112906043384157,  0.0571789111484879,  0.0968874635068131,  0.0954846130465814,),
  ( -1.5853521384736, -0.44723081219681, -0.16573173021922, 0.839313786282207,  1.42218489659597,   1.4015928337582,),
  ( -3.06270091688519, -0.863993673918576, -0.320172856100025,   1.62144866141593,   2.74748232968513,   2.70770105446982,),
  ( 495.976387330004,  47.2203880990181, -1215.62277241977,  15.2833434534975,   259.00495538446,   35.609827997935,),
  (   3.09165000587569,   0.206001554376822,   -7.28005326053692, 0.00859894280373505,    1.58972240977151,  0.0665918328475172,),
  (   1.59254089739601,   0.106113531495721,   -3.75003073782357, 0.00442940438383757,    0.81888245702346,  0.0343021419114977,),
  (  0.0934317889163547,  0.00622550861462227,    -0.22000821511025, 0.000259865963940125,   0.0480425042754152,  0.00201245097547842,),
  (   -1.40567731956332,  -0.0936625142664778,      3.3100143076031, -0.00390967245595735,   -0.722797448472637,  -0.0302772399605411,),
  (   -2.90478642804299,   -0.193550537147578,     6.84003683031646, -0.00807921087585483,    -1.49363740122069,  -0.0625669308965606,),
  (-39.4174266827821,  49.2517941577222,  6.10806420820106,  5.13048157142721, -14.2523224323315,  12.2507030965516,),
  ])

from toppra.cpp import PiecewisePolyPath
path = PiecewisePolyPath.constructHermite(qs, vs, ts)

from example_robot_data.robots_loader import loadUR
robot = loadUR(limited=True)

constraints = [
        joint_velocity_constraint(robot),
        torque_constraint(robot),
        ]
constraints_cpp = [
        joint_velocity_constraint_cpp(robot),
        torque_constraint_cpp(robot),
        ]

Ngripoints = len(ts)-1

from toppra.algorithm import TOPPRA
algo = TOPPRA(constraints, path, solver_wrapper='seidel', gridpoints=
        np.linspace(0, path.duration, Ngripoints+1))
sdd, sd, _ = algo.compute_parameterization(0, 0)

from toppra.cpp import TOPPRA as TOPPRAcpp
algocpp = TOPPRAcpp(constraints_cpp, path)
algocpp.setN(Ngripoints)
retcode = algocpp.computePathParametrization(0, 0)
sdcpp = np.sqrt(algocpp.parametrizationData.parametrization)

a = np.vstack([sd,sdcpp,sd-sdcpp]).T
